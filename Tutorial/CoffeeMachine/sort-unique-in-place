#/usr/bin/env bash

# input is filename without .txt extension

for file in $*; do
    ORIGIN=$file.txt
    SORTED=$file-sorted.txt
    UNIQUE=$file-unique.txt
    DUPLIC=$file-duplic.txt

    echo "# of lines (= states) before: $(cat $ORIGIN | wc -l)"

    sort    $file.txt > $SORTED
    sort -u $file.txt > $UNIQUE

    diff $SORTED $UNIQUE | egrep "^[<>]" | sed "s/^[<>] //g" > $DUPLIC

    echo "# of lines (= states) after:  $(cat $ORIGIN | wc -l)"

    echo -n "Sanity check: $SORTED and $UNIQUE are "
    if diff -q $SORTED $UNIQUE; then
	echo "equal"
    else
	echo "not equal. Duplicates kept in $DUPLIC"
    fi
done
